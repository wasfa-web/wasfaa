const ingredientEmojis = {
  // ÙÙˆØ§ÙƒÙ‡
  "Ù…ÙˆØ²":"ğŸŒ","ØªÙØ§Ø­":"ğŸ","Ø¨Ø±ØªÙ‚Ø§Ù„":"ğŸŠ","Ù„ÙŠÙ…ÙˆÙ†":"ğŸ‹","ÙØ±Ø§ÙˆÙ„Ø©":"ğŸ“",
  "Ø¹Ù†Ø¨":"ğŸ‡","Ø£Ù†Ø§Ù†Ø§Ø³":"ğŸ","ÙƒÙŠÙˆÙŠ":"ğŸ¥","Ø¨Ø·ÙŠØ®":"ğŸ‰","ÙƒÙ…Ø«Ø±Ù‰":"ğŸ",
  "Ø®ÙˆØ®":"ğŸ‘","Ù…Ø§Ù†Ø¬Ùˆ":"ğŸ¥­","ÙƒØ±Ø²":"ğŸ’","ØªÙˆØª":"ğŸ«","Ø±Ù…Ø§Ù†":"ğŸŒ¹",
  "ØªÙŠÙ†":"ğŸˆ","Ø¨Ø§Ø¨Ø§ÙŠØ§":"ğŸ¥­","Ø¬ÙˆØ§ÙØ©":"ğŸˆ","ÙØ§ÙƒÙ‡Ø© Ø§Ù„ØªÙ†ÙŠÙ†":"ğŸ‰","Ù…Ø´Ù…Ø´":"ğŸ¥­",
  "Ù„ÙŠÙ…ÙˆÙ† Ø£Ø®Ø¶Ø±":"ğŸ‹","Ø¬Ø±ÙŠØ¨ ÙØ±ÙˆØª":"ğŸŠ","Ø¨Ù„Ø­":"ğŸŒ´","Ø¬ÙˆØ§ÙØ© Ø­Ù…Ø±Ø§Ø¡":"ğŸˆ","ÙƒØ±Ø² Ø£Ø­Ù…Ø±":"ğŸ’",
  "ØªÙŠÙ† Ø£Ø®Ø¶Ø±":"ğŸˆ","Ø®ÙˆØ® Ø£ØµÙØ±":"ğŸ‘","ØªÙØ§Ø­ Ø£Ø®Ø¶Ø±":"ğŸ","Ø¹Ù†Ø¨ Ø£Ø³ÙˆØ¯":"ğŸ‡","Ø£Ù†Ø§Ù†Ø§Ø³ ØµØºÙŠØ±":"ğŸ",
  "ÙØ±Ø§ÙˆÙ„Ø© ØµØºÙŠØ±Ø©":"ğŸ“","Ø±Ù…Ø§Ù† Ø£Ø­Ù…Ø±":"ğŸŒ¹","ÙƒÙŠÙˆÙŠ ØµØºÙŠØ±":"ğŸ¥","Ù…Ø§Ù†Ø¬Ùˆ Ø£ØµÙØ±":"ğŸ¥­","Ù…ÙˆØ² ØµØºÙŠØ±":"ğŸŒ",
  "Ø¨Ø·ÙŠØ® Ø£Ø­Ù…Ø±":"ğŸ‰","ÙƒÙ…Ø«Ø±Ù‰ ØµØºÙŠØ±Ø©":"ğŸ","Ø¬ÙˆØ§ÙØ© ØµØºÙŠØ±Ø©":"ğŸˆ","ØªÙˆØª Ø¨Ø±ÙŠ":"ğŸ«","Ø¨Ø§Ø¨Ø§ÙŠØ§ ØµØºÙŠØ±Ø©":"ğŸ¥­",
  
  // Ø®Ø¶Ø§Ø±
  "Ø·Ù…Ø§Ø·Ù…":"ğŸ…","Ø®ÙŠØ§Ø±":"ğŸ¥’","Ø¬Ø²Ø±":"ğŸ¥•","ÙÙ„ÙÙ„ Ø£Ø­Ù…Ø±":"ğŸŒ¶ï¸","Ø¨ØµÙ„":"ğŸ§…",
  "Ø«ÙˆÙ…":"ğŸ§„","Ø¨Ø·Ø§Ø·Ø³":"ğŸ¥”","Ù‚Ø±Ù†Ø¨ÙŠØ·":"ğŸ¥¦","Ø³Ø¨Ø§Ù†Ø®":"ğŸ¥¬","ÙØ·Ø±":"ğŸ„",
  "Ø°Ø±Ø©":"ğŸŒ½","ÙƒØ±Ù†Ø¨":"ğŸ¥¬","Ø¨Ø·Ø§Ø·Ø§ Ø­Ù„ÙˆØ©":"ğŸ ","ÙƒÙˆØ³Ø©":"ğŸ¥’","Ø¨Ù‚Ø¯ÙˆÙ†Ø³":"ğŸŒ¿",
  "Ù†Ø¹Ù†Ø§Ø¹":"ğŸŒ±","Ø®Ø³":"ğŸ¥¬","ÙØ§ØµÙˆÙ„ÙŠØ§":"ğŸ«˜","Ø¨Ø§Ø²ÙŠÙ„Ø§":"ğŸŸ¢","Ø¬Ø±Ø¬ÙŠØ±":"ğŸ¥¬",
  "ÙÙ„ÙÙ„ Ø£Ø®Ø¶Ø±":"ğŸŒ¶ï¸","ÙÙ„ÙÙ„ Ø£ØµÙØ±":"ğŸŒ¶ï¸","Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†":"ğŸ†","ÙØ¬Ù„":"ğŸŒ¶ï¸","Ø¨Ø±ÙˆÙƒÙ„ÙŠ":"ğŸ¥¦",
  "ÙƒØ±ÙØ³":"ğŸ¥¬","ÙØ§ØµÙˆÙ„ÙŠØ§ Ø®Ø¶Ø±Ø§Ø¡":"ğŸŸ¢","ÙƒØ±Ø§Ø«":"ğŸ¥¬","Ø´Ù…Ù†Ø¯Ø±":"ğŸ¥•","ÙŠÙ‚Ø·ÙŠÙ†":"ğŸƒ",

  // Ø¨Ø±ÙˆØªÙŠÙ†Ø§Øª
  "Ø¯Ø¬Ø§Ø¬":"ğŸ—","Ù„Ø­Ù… Ø¨Ù‚Ø±":"ğŸ¥©","Ù„Ø­Ù… ØºÙ†Ù…":"ğŸ‘","Ø³Ù…Ùƒ":"ğŸŸ","Ø¬Ù…Ø¨Ø±ÙŠ":"ğŸ¦",
  "Ø¨ÙŠØ¶":"ğŸ¥š","Ø¬Ø¨Ù†":"ğŸ§€","Ø²Ø¨Ø§Ø¯ÙŠ":"ğŸ¶","Ø­Ù„ÙŠØ¨":"ğŸ¥›","ØªÙˆÙÙˆ":"ğŸ›",
  "Ø¹Ø¯Ø³":"ğŸ¥£","Ø­Ù…Øµ":"ğŸ¥£","ÙÙˆÙ„":"ğŸ¥£","Ù†Ù‚Ø§Ù†Ù‚":"ğŸŒ­","Ù„Ø­Ù… Ù…Ù‚Ø¯Ø¯":"ğŸ¥“",
  "Ø³Ù„Ù…ÙˆÙ†":"ğŸŸ","ØªÙˆÙ†Ø©":"ğŸŸ","Ù…Ø­Ø§Ø±":"ğŸ¦ª","ÙƒØ§Ø¨ÙˆØ±ÙŠØ§":"ğŸ¦€","Ù…Ø­Ø§Ø± ØµØºÙŠØ±":"ğŸ¦ª",
  "Ø±ÙˆØ¨ÙŠØ§Ù†":"ğŸ¦","ÙƒÙØªØ©":"ğŸ¥©","Ø¨Ø±ØºØ±":"ğŸ”","Ù‡Ù…Ø¨Ø±ØºØ±":"ğŸ”","Ø³ÙˆØ´ÙŠ":"ğŸ£",
  
  // Ù…Ø´Ø±ÙˆØ¨Ø§Øª
  "Ù…Ø§Ø¡":"ğŸ’§","Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„":"ğŸ§ƒ","Ø¹ØµÙŠØ± ØªÙØ§Ø­":"ğŸ§ƒ","Ù‚Ù‡ÙˆØ©":"â˜•","Ø´Ø§ÙŠ":"ğŸµ",
  "Ø­Ù„ÙŠØ¨ Ø§Ù„Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©":"ğŸ¥›ğŸ«","Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ":"ğŸ¥¤","Ù†Ø¨ÙŠØ°":"ğŸ·","Ø¨ÙŠØ±Ø©":"ğŸº",
  "Ø¹ØµÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ":"ğŸ§ƒ","Ø³Ù…ÙˆØ«ÙŠ":"ğŸ¹","Ø¹ØµÙŠØ± Ù„ÙŠÙ…ÙˆÙ†":"ğŸ‹","Ø¹ØµÙŠØ± Ù…Ø§Ù†Ø¬Ùˆ":"ğŸ¥­",
  "ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ":"â˜•","Ù„Ø§ØªÙŠÙ‡":"â˜•","Ù…ÙˆÙ‡ÙŠØªÙˆ":"ğŸ¸","ÙƒÙˆÙƒØªÙŠÙ„":"ğŸ¹","Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© Ø³Ø§Ø®Ù†Ø©":"ğŸ¥›ğŸ«",
  
  // Ù…Ø®Ø¨ÙˆØ²Ø§Øª ÙˆØ­Ø¨ÙˆØ¨
  "Ø®Ø¨Ø²":"ğŸ","ÙƒØ±ÙˆØ§Ø³ÙˆÙ†":"ğŸ¥","Ø¨ÙŠØªØ²Ø§":"ğŸ•","Ù…Ø¹ÙƒØ±ÙˆÙ†Ø©":"ğŸ","Ø£Ø±Ø²":"ğŸš",
  "ÙƒØ¹Ùƒ":"ğŸ°","Ø¨Ø§Ù† ÙƒÙŠÙƒ":"ğŸ¥","Ø¯ÙˆÙ†Ø§Øª":"ğŸ©","ÙˆØ§ÙÙ„":"ğŸ§‡","ØªÙˆØ³Øª":"ğŸ",
  "Ù…Ù‚Ø±Ù…Ø´Ø§Øª":"ğŸ˜","Ø¨Ø³ÙƒÙˆÙŠØª":"ğŸª","ÙƒÙˆØ±Ù† ÙÙ„ÙŠÙƒØ³":"ğŸ¥£","Ø®Ø¨Ø² Ø£Ø³Ù…Ø±":"ğŸ","Ø®Ø¨Ø² Ø£Ø¨ÙŠØ¶":"ğŸ",
  "ÙØ·Ø§Ø¦Ø±":"ğŸ¥®","Ø±ØºÙŠÙ":"ğŸ","ÙƒØ±Ø§Ù…Ø¨Ù„":"ğŸ°","Ù…Ø§ÙÙ†":"ğŸ§","ØªØ´ÙŠØ² ÙƒÙŠÙƒ":"ğŸ°",
  
  // Ø­Ù„ÙˆÙŠØ§Øª
  "Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©":"ğŸ«","Ù…Ø±Ø¨Ù‰":"ğŸ¯","Ø¹Ø³Ù„":"ğŸ¯","ÙƒÙŠÙƒ":"ğŸ°","Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ…":"ğŸ¨",
  "Ø¨ÙˆØ¯ÙŠÙ†Øº":"ğŸ®","Ø­Ù„ÙˆÙ‰":"ğŸ¬","Ø¨Ø³ÙƒÙˆÙŠØª":"ğŸª","Ø¬Ù„ÙŠ":"ğŸ®","ÙƒØ±Ø§Ù…ÙŠÙ„":"ğŸ®",
  "Ù…ÙˆØ³":"ğŸ®","ØªØ§Ø±Øª":"ğŸ°","Ø¨Ø±Ø§ÙˆÙ†ÙŠ":"ğŸ«","Ø¨Ø±Ø§ÙˆÙ†ÙŠØ²":"ğŸ«","ÙƒØ¹Ùƒ ÙÙˆØ§ÙƒÙ‡":"ğŸ°",
  "Ø¨ÙˆØ¯ÙŠÙ†Øº Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©":"ğŸ®","Ø­Ù„ÙˆÙ‰ Ø¬Ø§ÙØ©":"ğŸ¬","Ø³ÙˆÙŠØªØ³":"ğŸ¬","ØªØ´ÙˆÙƒÙ„ÙŠØª":"ğŸ«","Ù…ÙŠÙ†ÙŠ ÙƒÙŠÙƒ":"ğŸ§",
  
  // Ù…ÙƒØ³Ø±Ø§Øª ÙˆØ²ÙŠÙˆØª
  "Ù…ÙƒØ³Ø±Ø§Øª":"ğŸ¥œ","Ù„ÙˆØ²":"ğŸ¥œ","ÙØ³ØªÙ‚":"ğŸ¥œ","Ø¬ÙˆØ²":"ğŸ¥œ","Ø²ÙŠØª Ø§Ù„Ø²ÙŠØªÙˆÙ†":"ğŸ«’",
  "Ø²ÙŠØª Ø¯ÙˆØ§Ø± Ø§Ù„Ø´Ù…Ø³":"ğŸ›¢ï¸","Ø²Ø¨Ø¯Ø©":"ğŸ§ˆ","Ø²ÙŠØª Ù†Ø¨Ø§ØªÙŠ":"ğŸ›¢ï¸","Ø²ÙŠØª Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯":"ğŸ¥¥",
  
  // Ø£Ø·Ø¹Ù…Ø© Ø¬Ø§Ù‡Ø²Ø©
  "Ø³Ù†Ø¯ÙˆÙŠØ´":"ğŸ¥ª","ØªØ§ÙƒÙˆ":"ğŸŒ®","ÙÙ„Ø§ÙÙ„":"ğŸ¥™","Ø´Ø§ÙˆØ±Ù…Ø§":"ğŸ¥™","Ù‡ÙˆØª Ø¯ÙˆØº":"ğŸŒ­",
  "Ø¨Ø·Ø§Ø·Ø³ Ù…Ù‚Ù„ÙŠØ©":"ğŸŸ","Ø¨Ø±ØºØ±":"ğŸ”","Ù‡Ù…Ø¨Ø±ØºØ±":"ğŸ”","Ø¨ÙŠØªØ²Ø§ ØµØºÙŠØ±Ø©":"ğŸ•","Ù†ÙˆØ¯Ù„Ø²":"ğŸœ",
  "Ø±Ø§Ù…Ù†":"ğŸœ","Ø³ÙˆØ´ÙŠ ØµØºÙŠØ±":"ğŸ£","Ø³Ù„Ø·Ø©":"ğŸ¥—","Ø´ÙˆØ±Ø¨Ø©":"ğŸ²","ÙƒØ¨Ø³Ø©":"ğŸ›",
  "Ø¨Ø±ÙŠØ§Ù†ÙŠ":"ğŸ›","Ø·Ø§Ø¬Ù†":"ğŸ²","Ù…Ø±Ù‚":"ğŸ²","Ø´ÙˆØ±Ø¨Ø© Ø¹Ø¯Ø³":"ğŸ¥£","Ø³Ù…Ø¨ÙˆØ³Ø©":"ğŸ¥Ÿ",
  
  // ØªÙˆØ§Ø¨Ù„ ÙˆØ£Ø¹Ø´Ø§Ø¨
  "Ù…Ù„Ø­":"ğŸ§‚","ÙÙ„ÙÙ„ Ø£Ø³ÙˆØ¯":"ğŸ§‚","Ø¨Ù‡Ø§Ø±Ø§Øª":"ğŸŒ¿","ÙƒÙ…ÙˆÙ†":"ğŸŒ¿","Ø²Ø¹ØªØ±":"ğŸŒ¿",
  "Ù‚Ø±ÙØ©":"ğŸŒ¿","Ù‡ÙŠÙ„":"ğŸŒ¿","Ø²Ù†Ø¬Ø¨ÙŠÙ„":"ğŸŒ¿","Ø¨Ø§Ø¨Ø±ÙŠÙƒØ§":"ğŸŒ¶ï¸","Ø£ÙˆØ±ÙŠØ¬Ø§Ù†Ùˆ":"ğŸŒ¿",
  "Ø±ÙŠØ­Ø§Ù†":"ğŸŒ¿","Ù†Ø¹Ù†Ø§Ø¹ Ø·Ø§Ø²Ø¬":"ğŸŒ±","Ø¨Ù‚Ø¯ÙˆÙ†Ø³":"ğŸŒ¿","Ø«ÙˆÙ… Ø¨ÙˆØ¯Ø±Ø©":"ğŸ§„","Ø¨Ø§Ø¨ÙˆÙ†Ø¬":"ğŸŒ¿",
  
  // Ø¥Ø¶Ø§ÙØ§Øª Ù…ØªÙ†ÙˆØ¹Ø©
  "ØµÙ„ØµØ© Ø·Ù…Ø§Ø·Ù…":"ğŸ…","ØµÙ„ØµØ© Ø¨ÙŠØ³ØªÙˆ":"ğŸŒ¿","ØµÙ„ØµØ© Ø¬Ø¨Ù†":"ğŸ§€","ÙƒØ±ÙŠÙ…Ø©":"ğŸ¥›","Ù…Ø´Ø±ÙˆÙ…":"ğŸ„",
  "Ø·Ø­ÙŠÙ†Ø©":"ğŸ¥£","ØµÙ„ØµØ© Ø§Ù„ØµÙˆÙŠØ§":"ğŸ¥¢","ØµÙ„ØµØ© Ø­Ø§Ø±Ø©":"ğŸŒ¶ï¸","ØµÙ„ØµØ© Ø¨Ø§Ø±Ø¨ÙƒÙŠÙˆ":"ğŸ¥«","ØµÙ„ØµØ© Ø§Ù„ÙÙ„ÙÙ„":"ğŸŒ¶ï¸",
  "Ø²Ø¨ÙŠØ¨":"ğŸ‡","ØªÙ…Ø±":"ğŸŒ´","Ù…Ø´Ù…Ø´ Ù…Ø¬ÙÙ":"ğŸ¥­","Ø¬ÙˆØ² Ù‡Ù†Ø¯":"ğŸ¥¥","Ø¹ØµÙŠØ± Ù„ÙŠÙ…ÙˆÙ†":"ğŸ‹",
  "ÙÙˆØ§ÙƒÙ‡ Ù…Ø¬ÙÙØ©":"ğŸ¥­","ÙƒØ§Ø¬Ùˆ":"ğŸ¥œ","Ø²Ø¨Ø¯Ø© ÙÙˆÙ„ Ø³ÙˆØ¯Ø§Ù†ÙŠ":"ğŸ¥œ","ÙØ³ØªÙ‚ Ø­Ù„Ø¨ÙŠ":"ğŸ¥œ","Ù„ÙˆØ² Ù…Ø­Ù…Øµ":"ğŸ¥œ",
  
  // Ø¥Ø¶Ø§ÙØ§Øª Ø¹Ø§Ù„Ù…ÙŠØ©
  "ØªÙˆØ§Ø¨Ù„ Ø¢Ø³ÙŠÙˆÙŠØ©":"ğŸŒ¿","ØµÙ„ØµØ© Ø³Ù…Ùƒ":"ğŸŸ","Ø³Ù…Ùƒ Ø³Ù„Ù…ÙˆÙ†":"ğŸŸ","Ø¬Ù…Ø¨Ø±ÙŠ ØµØºÙŠØ±":"ğŸ¦","ÙƒØ±Ø§Øª Ù„Ø­Ù…":"ğŸ¥©",
  "ÙØ·Ø§Ø¦Ø± ÙŠØ§Ø¨Ø§Ù†ÙŠØ©":"ğŸ¥®","Ø³ÙˆØ´ÙŠ Ø±ÙˆÙ„":"ğŸ£","Ø±Ø§Ù…Ù† Ø´ÙˆØ±Ø¨Ø©":"ğŸœ","Ø¨Ø§Ø³ØªØ§":"ğŸ","Ø¨ÙŠØªØ²Ø§ Ù…Ø§Ø±Ø¬Ø±ÙŠØªØ§":"ğŸ•",
  
  // Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø®Ø§ØµØ©
  "Ø¹ØµÙŠØ± ÙØ±Ø§ÙˆÙ„Ø©":"ğŸ“","Ø¹ØµÙŠØ± ØªÙØ§Ø­ Ø£Ø­Ù…Ø±":"ğŸ","Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ Ø·Ø¨ÙŠØ¹ÙŠ":"ğŸ§ƒ","Ù…ÙˆÙ‡ÙŠØªÙˆ ÙÙˆØ§ÙƒÙ‡":"ğŸ¸",
  "ÙƒÙˆÙƒØªÙŠÙ„ ÙÙˆØ§ÙƒÙ‡":"ğŸ¹","Ø´Ø§ÙŠ Ù…Ø«Ù„Ø¬":"ğŸ¹","Ù‚Ù‡ÙˆØ© Ù…Ø«Ù„Ø¬Ø©":"â˜•","Ù„Ø§ØªÙŠÙ‡ Ù…Ø«Ù„Ø¬":"â˜•","ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ Ù…Ø«Ù„Ø¬":"â˜•"
};

function addEmojisToIngredients(ingredients) {
  return ingredients.map(i => ingredientEmojis[i] || i).join(", ");
}

// Ù…Ø«Ø§Ù„ Ø¯Ø§Ø®Ù„ render Ø£Ùˆ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± ÙˆØµÙØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
selectedRecipe.innerHTML = `
  <div class="recipe-box"><h2>${r.name}</h2></div>
  ${r.image ? `<img src="${r.image}" alt="${r.name}">` : ""}
  <div class="recipe-box"><p><strong>Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:</strong> ${addEmojisToIngredients(r.ingredients)}</p></div>
  <div class="recipe-box"><p><strong>Ù†ÙˆØ¹ Ø§Ù„ÙˆØ¬Ø¨Ø©:</strong> ${r.meal || "â€”"}</p></div>
`;


let recipes = JSON.parse(localStorage.getItem("recipes") || "[]");

const appTitle = document.getElementById("appTitle");
const themeSelector = document.getElementById("themeSelector");
const mustHave = document.getElementById("mustHave");
const mustNotHave = document.getElementById("mustNotHave");
const selectedRecipe = document.getElementById("selectedRecipe");

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø³Ù… Ù…Ù† localStorage Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
appTitle.value = localStorage.getItem("appTitle") || "ğŸ§‘â€ğŸ³ ÙˆØµÙØ§ØªÙƒ";
appTitle.addEventListener("input", () => {
  localStorage.setItem("appTitle", appTitle.value);
});

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ù…Ù† localStorage Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
const savedTheme = localStorage.getItem("theme") || "cyan";
document.body.setAttribute("data-theme", savedTheme);
themeSelector.value = savedTheme;

// ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ… Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
themeSelector.addEventListener("change", () => {
  const theme = themeSelector.value;
  document.body.setAttribute("data-theme", theme);
  localStorage.setItem("theme", theme);
});

// ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù†ØµÙŠØ© Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ©
function parseIngredients(text) {
  return text.replace(/[,ØŒ]/g, " ").split(/\s+/).filter(Boolean);
}

// ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª
function updateIngredientSuggestions() {
  const list = document.getElementById("ingredientsList");
  list.innerHTML = "";
  [...new Set(recipes.flatMap(r => r.ingredients))].forEach(i => {
    const option = document.createElement("option");
    option.value = i;
    list.appendChild(option);
  });
}

// Ø¥Ø¶Ø§ÙØ© ÙˆØµÙØ© Ø¬Ø¯ÙŠØ¯Ø©
function addRecipe() {
  const name = recipeName.value.trim();
  const ingredients = parseIngredients(recipeIngredients.value);
  const imageInput = document.getElementById("recipeImage");
  const meal = document.getElementById("mealType").value;

  if (!name || !ingredients.length) return;

  if (imageInput.files[0]) {
    const reader = new FileReader();
    reader.onload = () => saveRecipe(reader.result);
    reader.readAsDataURL(imageInput.files[0]);
  } else {
    saveRecipe("");
  }

  function saveRecipe(img) {
    recipes.push({
      id: Date.now(),
      name,
      ingredients,
      image: img,
      meal
    });
    localStorage.setItem("recipes", JSON.stringify(recipes));
    recipeName.value = "";
    recipeIngredients.value = "";
    imageInput.value = "";
    document.getElementById("mealType").value = "";
    updateIngredientSuggestions();
  }
}

// Ø§Ù‚ØªØ±Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙÙŠ Ø§Ù„Ù…Ø±Ø¨Ø¹ÙŠÙ†
function filterSuggestions(input) {
  const allIngredients = [...new Set(recipes.flatMap(r => r.ingredients))];
  const value = input.value.toLowerCase();
  const filtered = allIngredients.filter(i => i.toLowerCase().includes(value));

  if (!filtered.length && value.length) {
    input.setCustomValidity("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙƒÙˆÙ† Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù…");
    input.reportValidity();
  } else {
    input.setCustomValidity("");
  }

  const list = document.getElementById(input.getAttribute("list"));
  list.innerHTML = "";
  filtered.forEach(i => {
    const option = document.createElement("option");
    option.value = i;
    list.appendChild(option);
  });
}

// Ø§Ø®ØªÙŠØ§Ø± ÙˆØµÙØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
function getRandomRecipe() {
  let filtered = [...recipes];
  const must = mustHave.value.toLowerCase();
  const not = mustNotHave.value.toLowerCase();
  const mealFilter = filterMeal.value;

  if (must) filtered = filtered.filter(r => r.ingredients.some(i => i.toLowerCase().includes(must)));
  if (not) filtered = filtered.filter(r => !r.ingredients.some(i => i.toLowerCase().includes(not)));
  if (mealFilter) filtered = filtered.filter(r => r.meal === mealFilter);

  if (!filtered.length) {
    selectedRecipe.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØµÙØ©</p>";
    return;
  }

  const r = filtered[Math.floor(Math.random() * filtered.length)];

  selectedRecipe.innerHTML = `
    <div class="recipe-box"><h2>${r.name}</h2></div>
    ${r.image ? `<img src="${r.image}" alt="${r.name}">` : ""}
    <div class="recipe-box"><p><strong>Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:</strong> ${r.ingredients.join(", ")}</p></div>
    <div class="recipe-box"><p><strong>Ù†ÙˆØ¹ Ø§Ù„ÙˆØ¬Ø¨Ø©:</strong> ${r.meal || "â€”"}</p></div>
  `;
}

// ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
mustHave.addEventListener("input", () => filterSuggestions(mustHave));
mustNotHave.addEventListener("input", () => filterSuggestions(mustNotHave));

// ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
updateIngredientSuggestions();
